// Datastar Aliased v1.0.0-RC.12
var Ge=/ðŸ–•JS_DSðŸš€/.source,ae=Ge.slice(0,5),xe=Ge.slice(4),w="datastar",We="Datastar-Request",Ke=1e3;var Ue=!1,Le="outer",Be="inner",Je="remove",ze="replace",Qe="prepend",Ze="append",Ye="before",Xe="after",et=Le,Z="datastar-patch-elements",Y="datastar-patch-signals";var j=e=>e!==null&&typeof e=="object"&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null);function tt(e){for(let t in e)if(Object.hasOwn(e,t))return!1;return!0}function X(e,t){for(let n in e){let i=e[n];j(i)||Array.isArray(i)?X(i,t):e[n]=t(i)}}var y=(e,t)=>{for(let n in t){let i=n.split("."),r=i.pop(),o=i.reduce((s,a)=>s[a]??={},e);o[r]=t[n]}return e};function ce(e){return e instanceof HTMLElement||e instanceof SVGElement}function le(e){return e?.closest("[data-scope]")?.dataset.scope??null}var nt=e=>e.trim()==="true",A=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([a-z])([0-9]+)/gi,"$1-$2").replace(/([0-9]+)([a-z])/gi,"$1-$2").toLowerCase(),q=e=>A(e).replace(/-./g,t=>t[1].toUpperCase()),ee=e=>A(e).replace(/-/g,"_"),dn=e=>q(e).replace(/(^.|(?<=\.).)/g,t=>t[0].toUpperCase()),ue=e=>{try{return JSON.parse(e)}catch{return Function(`return (${e})`)()}},pn={kebab:A,snake:ee,pascal:dn};function x(e,t){for(let n of t.get("case")||[]){let i=pn[n];i&&(e=i(e))}return e}function L(e,t,n){if(n.has("scoped")){let i=le(t);i&&(e=`${i}.${e}`)}return e}var it={type:"attribute",name:"computed",keyReq:"must",valReq:"must",isExpr:!0,onLoad:({el:e,key:t,mods:n,rx:i,computed:r,mergePatch:o})=>{let s=x(t,n);s=L(s,e,n),o(y({},{[s]:r(i)}))}};var rt={type:"attribute",name:"effect",keyReq:"denied",valReq:"must",onLoad:({effect:e,rx:t})=>e(t)};var st={type:"attribute",name:"signals",isExpr:!0,onLoad:({el:e,key:t,mods:n,rx:i,mergePatch:r})=>{let o=n.has("ifmissing");if(t)t=L(x(t,n),e,n),r(y({},{[t]:i()}),{ifMissing:o});else{let s=i(),a={};for(let l in s)a[L(l,e,n)]=s[l];r(y({},a),{ifMissing:o})}}};var fn="https://data-star.dev/errors";function ot(e,t,n={}){let i=new Error;i.name=`${w} ${e} error`;let r=ee(t),o=new URLSearchParams({metadata:JSON.stringify(n)}).toString(),s=JSON.stringify(n,null,2);return i.message=`${t}
More info: ${fn}/${e}/${r}?${o}
Context: ${s}`,i}function G(e,t,n={}){let i={plugin:{name:t.plugin.name,type:t.plugin.type}};return ot("init",e,Object.assign(i,n))}function at(e,t,n={}){let i={plugin:{name:e.plugin.name,type:e.plugin.type},element:{id:e.el.id,tag:e.el.tagName},expression:{rawKey:e.rawKey,key:e.key,value:e.value,fnContent:e.fnContent}};return ot("runtime",t,Object.assign(i,n))}var de=`${w}-signal-patch`;var pe={},we=[],he=0,fe=0,Oe=0,k,lt=()=>{he++},ut=()=>{--he||(mt(),$())},W=e=>gn.bind(0,{previousValue:e,t:e,e:1}),dt=Symbol("computed"),pt=e=>{let t=mn.bind(0,{e:17,getter:e});return t[dt]=1,t},ft=e=>{let t={p:e,e:2};k&&$e(t,k);let n=P(t);try{t.p()}finally{P(n)}return bt.bind(0,t)},Ce=e=>{let t=P(void 0);try{return e()}finally{P(t)}},mt=()=>{for(;fe<Oe;){let e=we[fe];we[fe++]=void 0,vt(e,e.e&=-65)}fe=0,Oe=0},ct=e=>"getter"in e?gt(e):yt(e,e.t),P=e=>{let t=k;return k=e,t},gt=e=>{let t=P(e);ht(e);try{let n=e.t;return n!==(e.t=e.getter(n))}finally{P(t),Et(e)}},yt=(e,t)=>(e.e=1,e.previousValue!==(e.previousValue=t)),Fe=e=>{let t=e.e;if(!(t&64)){e.e=t|64;let n=e.s;n?Fe(n.o):we[Oe++]=e}},vt=(e,t)=>{if(t&16||t&32&&St(e.r,e)){let i=P(e);ht(e);try{e.p()}finally{P(i),Et(e)}return}t&32&&(e.e=t&-33);let n=e.r;for(;n;){let i=n.c,r=i.e;r&64&&vt(i,i.e=r&-65),n=n.n}},mn=e=>{let t=e.e;if(t&16||t&32&&St(e.r,e)){if(gt(e)){let n=e.s;n&&ve(n)}}else t&32&&(e.e=t&-33);return k&&$e(e,k),e.t},gn=(e,...t)=>{if(t.length){let i=t[0];if(e.t!==(e.t=i)){e.e=17;let r=e.s;return r&&(yn(r),he||mt()),!0}return!1}let n=e.t;if(e.e&16&&yt(e,n)){let i=e.s;i&&ve(i)}return k&&$e(e,k),n},bt=e=>{let t=e.r;for(;t;)t=ye(t,e);let n=e.s;n&&ye(n),e.e=0},$e=(e,t)=>{let n=t.a;if(n&&n.c===e)return;let i,r=t.e&4;if(r&&(i=n?n.n:t.r,i&&i.c===e)){t.a=i;return}let o=e.f;if(o&&o.o===t&&(!r||Rt(o,t)))return;let s=t.a=e.f={c:e,o:t,l:n,n:i,u:o};i&&(i.l=s),n?n.n=s:t.r=s,o?o.i=s:e.s=s},ye=(e,t=e.o)=>{let n=e.c,i=e.l,r=e.n,o=e.i,s=e.u;if(r?r.l=i:t.a=i,i?i.n=r:t.r=r,o?o.u=s:n.f=s,s)s.i=o;else if(!(n.s=o))if("getter"in n){let a=n.r;if(a){n.e=17;do a=ye(a,n);while(a)}}else"previousValue"in n||bt(n);return r},yn=e=>{let t=e.i,n;e:for(;;){let i=e.o,r=i.e;if(r&3&&(r&60?r&12?r&4?!(r&48)&&Rt(e,i)?(i.e=r|40,r&=1):r=0:i.e=r&-9|32:r=0:i.e=r|32,r&2&&Fe(i),r&1)){let o=i.s;if(o){e=o,o.i&&(n={t,d:n},t=e.i);continue}}if(e=t){t=e.i;continue}for(;n;)if(e=n.t,n=n.d,e){t=e.i;continue e}break}},ht=e=>{e.a=void 0,e.e=e.e&-57|4},Et=e=>{let t=e.a,n=t?t.n:e.r;for(;n;)n=ye(n,e);e.e&=-5},St=(e,t)=>{let n,i=0;e:for(;;){let r=e.c,o=r.e,s=!1;if(t.e&16)s=!0;else if((o&17)===17){if(ct(r)){let a=r.s;a.i&&ve(a),s=!0}}else if((o&33)===33){(e.i||e.u)&&(n={t:e,d:n}),e=r.r,t=r,++i;continue}if(!s&&e.n){e=e.n;continue}for(;i;){--i;let a=t.s,l=a.i;if(l?(e=n.t,n=n.d):e=a,s){if(ct(t)){l&&ve(a),t=e.o;continue}}else t.e&=-33;if(t=e.o,e.n){e=e.n;continue e}s=!1}return s}},ve=e=>{do{let t=e.o,n=e.i,i=t.e;(i&48)===32&&(t.e=i|16,i&2&&Fe(t)),e=n}while(e)},Rt=(e,t)=>{let n=t.a;if(n){let i=t.r;do{if(i===e)return!0;if(i===n)break;i=i.n}while(i)}return!1},ke=e=>e.split(".").reduce((t,n)=>t[n],I),Tt=e=>Ce(()=>e.split(".").reduce((t,n)=>t&&Object.hasOwn(t,n)?t[n]:void 0,I)!==void 0),me=(e,t="")=>{let n=Array.isArray(e);if(n||j(e)){let i=n?[]:{};for(let o in e)i[o]=W(me(e[o],`${t+o}.`));let r=W(0);return new Proxy(i,{get:(o,s)=>{if(!(s==="toJSON"&&!Object.hasOwn(i,s)))return n&&s in Array.prototype?(r(),i[s]):(Object.hasOwn(i,s)||(i[s]=W(""),$({[t+s]:""}),r(r()+1)),i[s]())},set:(o,s,a)=>{if(n&&s==="length")return i[s]=a,$({[t.slice(0,-1)]:i}),r(r()+1),!0;if(Object.hasOwn(i,s)){if(a==null)return delete i[s],$({[t+s]:null}),r(r()+1),!0;i[s](me(a,`${t+s}.`))&&$({[t+s]:a})}else{if(a==null)return!0;Object.hasOwn(a,dt)?(i[s]=a,$({[t+s]:""})):(i[s]=W(me(a,`${t+s}.`)),$({[t+s]:a})),r(r()+1)}return!0},deleteProperty:(o,s)=>(Object.hasOwn(i,s)&&(delete i[s],$({[t+s]:null}),r(r()+1)),!0),ownKeys:()=>(r(),Reflect.ownKeys(i)),has(o,s){return r(),s in i}})}return e},$=e=>{if(e&&y(pe,e),!he&&!tt(pe)){let t=pe;pe={},document.dispatchEvent(new CustomEvent(de,{detail:t}))}},At=(e,{ifMissing:t}={})=>{lt();for(let n in e)e[n]===null||e[n]===void 0?t||delete I[n]:xt(e[n],n,I,"",t);ut()},xt=(e,t,n,i,r)=>{if(j(e)){Object.hasOwn(n,t)&&(j(n[t])||Array.isArray(n[t]))||(n[t]={});for(let o in e)e[o]===null||e[o]===void 0?r||delete n[t][o]:xt(e[o],o,n[t],`${i+t}.`,r)}else r&&Object.hasOwn(n,t)||(n[t]=e)};function Lt({include:e=/.*/,exclude:t=/(?!)/}={},n=I){let i={},r=[[n,""]];for(;r.length;){let[o,s]=r.pop();for(let a in o)j(o[a])?r.push([o[a],`${s+a}.`]):e.test(s+a)&&!t.test(s+a)&&(i[s+a]=ke(s+a))}return y({},i)}var I=me({}),ne={},ge=[],Mt=[],te=new Map,Me=null,ie="";function Pe(e){ie=e}function O(e){return ie?`data-${ie}-${e}`:`data-${e}`}function Ee(...e){for(let t of e){let n={plugin:t,actions:ne,root:I,filtered:Lt,signal:W,computed:pt,effect:ft,mergePatch:At,peek:Ce,getPath:ke,hasPath:Tt};if(t.type==="action")ne[t.name]=t;else if(t.type==="attribute")ge.push(t),t.onGlobalInit?.(n);else if(t.type==="watcher")t.onGlobalInit?.(n);else throw G("InvalidPluginType",n)}ge.sort((t,n)=>{let i=n.name.length-t.name.length;return i!==0?i:t.name.localeCompare(n.name)}),Mt=ge.map(t=>RegExp(`^${t.name}([A-Z]|_|$)`))}function be(e){for(let t of e)for(let n in t.dataset)wt(t,n,t.dataset[n])}function Ie(e=document.body){queueMicrotask(()=>{be([e]),be(e.querySelectorAll("*")),Me||(Me=new MutationObserver(vn),Me.observe(e,{subtree:!0,childList:!0,attributes:!0}))})}function wt(e,t,n){let i=q(ie?t.slice(ie.length):t),r=ge.find((o,s)=>Mt[s].test(i));if(r){let[o,...s]=i.slice(r.name.length).split(/__+/),a=!!o;a&&(o=q(o));let l=!!n,c={el:e,rawKey:i,key:o,value:n,mods:new Map,root:I,filtered:Lt,mergePatch:At,signal:W,computed:pt,effect:ft,plugin:r,actions:ne,peek:Ce,getPath:ke,hasPath:Tt,runtimeErr:0,rx:0};c.runtimeErr=at.bind(0,c),c.rx=bn(c);let m=r.keyReq||"allowed";if(a){if(m==="denied")throw c.runtimeErr(`${r.name}KeyNotAllowed`)}else if(m==="must")throw c.runtimeErr(`${r.name}KeyRequired`);let p=r.valReq||"allowed";if(l){if(p==="denied")throw c.runtimeErr(`${r.name}ValueNotAllowed`)}else if(p==="must")throw c.runtimeErr(`${r.name}ValueRequired`);if(m==="exclusive"||p==="exclusive"){if(a&&l)throw c.runtimeErr(`${r.name}KeyAndValueProvided`);if(!a&&!l)throw c.runtimeErr(`${r.name}KeyOrValueRequired`)}for(let d of s){let[v,...g]=d.split(".");c.mods.set(q(v),new Set(g.map(f=>f.toLowerCase())))}lt();let u=r.onLoad(c);if(ut(),u){let d=te.get(e);d?d.get(i)?.():(d=new Map,te.set(e,d)),d.set(i,u)}}}function vn(e){let t=`[${O("ignore")}]`;for(let{target:n,type:i,attributeName:r,addedNodes:o,removedNodes:s}of e)if(i==="childList"){for(let a of s)if(ce(a)){let l=te.get(a);if(te.delete(a)){for(let c of l.values())c();l.clear()}}for(let a of o)ce(a)&&(be([a]),be(a.querySelectorAll("*")))}else if(i==="attributes"&&ce(n)&&!n.closest(t)){let a=q(r.slice(5)),l=n.getAttribute(r);if(l===null){let c=te.get(n);c&&(c.get(a)?.(),c.delete(a))}else wt(n,a,l)}}function bn(e){let t="",n=e.plugin||void 0;if(n?.isExpr){let p=/(\/(\\\/|[^/])*\/|"(\\"|[^"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|\(\s*((function)\s*\(\s*\)|(\(\s*\))\s*=>)\s*(?:\{[\s\S]*?\}|[^;){]*)\s*\)\s*\(\s*\)|[^;])+/gm,u=e.value.trim().match(p);if(u){let d=u.length-1,v=u[d].trim();v.startsWith("return")||(u[d]=`return (${v});`),t=u.join(`;
`)}}else t=e.value.trim();t=t.replace(/\$\$([a-zA-Z_][\w.-]*(?:\.[a-zA-Z_][\w.-]*)*?)(?=\s|$|[^\w.-])/g,(p,u)=>{let d=le(e.el);return d?`$${d}.${u}`:`$${u}`}),t=t.replace(/\$([a-zA-Z_][\w.-]*(?:\.[a-zA-Z_][\w.-]*)*?)(?=\s|$|[^\w.-])/g,(p,u)=>u.endsWith("-")&&p.length<t.length&&t[t.indexOf(p)+p.length]==="$"?(u=u.slice(0,-1),`${u.split(".").reduce((g,f)=>`${g}['${f}']`,"$")}-`):u.split(".").reduce((v,g)=>`${v}['${g}']`,"$"));let i=new Map,r=RegExp(`(?:${ae})(.*?)(?:${xe})`,"gm");for(let p of t.matchAll(r)){let u=p[1],d=`dsEscaped${hn(u)}`;i.set(d,u),t=t.replace(ae+u+xe,d)}let o=(p,u)=>`${p}${ee(u).replaceAll(/\./g,"_")}`,s=new Set,a=RegExp(`@(${Object.keys(ne).join("|")})\\(`,"gm"),l=[...t.matchAll(a)],c=new Set,m=new Set;if(l.length){let p=`${w}Act_`;for(let u of l){let d=u[1],v=ne[d];if(!v)continue;s.add(d);let g=o(p,d);t=t.replace(`@${d}(`,`${g}(`),c.add(g),m.add((...f)=>v.fn(e,...f))}}for(let[p,u]of i)t=t.replace(p,u);e.fnContent=t;try{let p=Function("el","$",...n?.argNames||[],...c,t);return(...u)=>{try{return p(e.el,I,...u,...m)}catch(d){throw e.runtimeErr("ExecuteExpression",{error:d.message})}}}catch(p){throw e.runtimeErr("GenerateExpression",{error:p.message})}}function hn(e){let t=5831,n=e.length;for(;n--;)t+=(t<<5)+e.charCodeAt(n);return(t>>>0).toString(36)}Ee(st,it,rt);var Ot={type:"action",name:"peek",fn:({peek:e},t)=>e(t)};var Ct={type:"action",name:"setAll",fn:({filtered:e,mergePatch:t,peek:n},i,r)=>{n(()=>{let o=e(r);X(o,()=>i),t(o)})}};var Ft={type:"action",name:"toggleAll",fn:({filtered:e,mergePatch:t,peek:n},i)=>{n(()=>{let r=e(i);X(r,o=>!o),t(r)})}};var $t={type:"attribute",name:"attr",valReq:"must",isExpr:!0,onLoad:({el:e,effect:t,key:n,rx:i})=>{let r=(l,c)=>{c===""||c===!0?e.setAttribute(l,""):c===!1||c===null||c===void 0?e.removeAttribute(l):e.setAttribute(l,c)};if(n===""){let l=new MutationObserver(()=>{l.disconnect();let m=i();for(let[p,u]of Object.entries(m))r(p,u);l.observe(e,{attributeFilter:Object.keys(m)})}),c=t(()=>{l.disconnect();let m=i();for(let p in m)r(p,m[p]);l.observe(e,{attributeFilter:Object.keys(m)})});return()=>{l.disconnect(),c()}}let o=A(n),s=new MutationObserver(()=>{s.disconnect();let l=i();r(o,l),s.observe(e,{attributeFilter:[l]})}),a=t(()=>{s.disconnect();let l=i();r(o,l),s.observe(e,{attributeFilter:[l]})});return()=>{s.disconnect(),a()}}};var En=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,Sn=/email|password|search|tel|text|url/,Rn=/number|range/,kt={type:"attribute",name:"bind",keyReq:"exclusive",valReq:"exclusive",onLoad:({el:e,key:t,mods:n,value:i,effect:r,mergePatch:o,runtimeErr:s,getPath:a,hasPath:l})=>{let c=t?x(t,n):i;if(c=L(c,e,n),e instanceof HTMLInputElement&&Sn.test(e.type)||e instanceof HTMLTextAreaElement){if(Array.isArray(l(c)&&a(c))){let v=n.has("scoped")?"__scoped":"",g=document.querySelectorAll(`[${O("bind")}${v}-${t}],[${O("bind")}${v}="${i}"]`),f=0,b={};for(let R of g){if(l(`${c}.${f}`)||(b[`${c}.${f}`]=R.value),e===R)break;f++}o(y({},b));let E=()=>{o(y({},{[`${c}.${f}`]:e.value}))};e.addEventListener("change",E),e.addEventListener("input",E);let h=r(()=>e.value=a(c)[f]);return()=>{h(),e.removeEventListener("change",E),e.removeEventListener("input",E)}}o(y({},{[c]:e.value}),{ifMissing:!0});let u=()=>o(y({},{[c]:e.value}));e.addEventListener("change",u),e.addEventListener("input",u);let d=r(()=>e.value=a(c));return()=>{d(),e.removeEventListener("change",u),e.removeEventListener("input",u)}}if(e instanceof HTMLInputElement){if(e.type==="checkbox"){if(Array.isArray(l(c)&&a(c))){let g=n.has("scoped")?"__scoped":"",f=document.querySelectorAll(`[${O("bind")}${g}-${t}],[${O("bind")}${g}="${i}"]`),b=0,E={};for(let S of f){if(!l(`${c}.${b}`)){let se=S.getAttribute("value");E[`${c}.${b}`]=se?S.checked?se:"":S.checked}if(e===S)break;b++}o(y({},E));let h=()=>{let S=e.getAttribute("value");o(y({},{[`${c}.${b}`]:S?e.checked?S:"":e.checked}))};e.addEventListener("change",h),e.addEventListener("input",h);let R=r(()=>{let S=e.getAttribute("value");e.checked=S?S===a(c)[b]:a(c)[b]});return()=>{R(),e.removeEventListener("change",h),e.removeEventListener("input",h)}}let u=e.getAttribute("value");o(y({},{[c]:u?e.checked?u:"":e.checked}));let d=()=>{let g=e.getAttribute("value");o(y({},{[c]:g?e.checked?g:"":e.checked}))};e.addEventListener("change",d),e.addEventListener("input",d);let v=r(()=>{let g=e.getAttribute("value");e.checked=g?g===a(c):a(c)});return()=>{v(),e.removeEventListener("change",d),e.removeEventListener("input",d)}}if(e.type==="radio"){e.getAttribute("name")?.length||e.setAttribute("name",c),o(y({},{[c]:e.value}),{ifMissing:!0});let u=()=>e.checked&&o(y({},{[c]:e.value}));e.addEventListener("change",u),e.addEventListener("input",u);let d=r(()=>e.checked=e.value===a(c));return()=>{d(),e.removeEventListener("change",u),e.removeEventListener("input",u)}}if(Rn.test(e.type)){o(y({},{[c]:+e.value}),{ifMissing:!0});let u=()=>o(y({},{[c]:+e.value}));e.addEventListener("change",u),e.addEventListener("input",u);let d=r(()=>e.value=a(c));return()=>{d(),e.removeEventListener("change",u),e.removeEventListener("input",u)}}if(e.type==="file"){let u=()=>{let d=[...e.files||[]],v=[],g=[],f=[];Promise.all(d.map(b=>new Promise(E=>{let h=new FileReader;h.onload=()=>{if(typeof h.result!="string")throw s("InvalidFileResultType",{resultType:typeof h.result});let R=h.result.match(En);if(!R?.groups)throw s("InvalidDataUri",{result:h.result});v.push(R.groups.contents),g.push(R.groups.mime),f.push(b.name)},h.onloadend=()=>E(),h.readAsDataURL(b)}))).then(()=>{o(y({},{[c]:v,[`${c}Mimes`]:g,[`${c}Names`]:f}))})};return e.addEventListener("change",u),e.addEventListener("input",u),()=>{e.removeEventListener("change",u),e.removeEventListener("input",u)}}}if(e instanceof HTMLSelectElement){if(e.multiple){o(y({},{[c]:[...e.selectedOptions].map(b=>b.value)}),{ifMissing:!0});let g=()=>o(y({},{[c]:[...e.selectedOptions].map(b=>b.value)}));e.addEventListener("change",g),e.addEventListener("input",g);let f=r(()=>{let b=a(c);for(let E of e.options)E.selected=b.includes(E.value)});return()=>{f(),e.removeEventListener("change",g),e.removeEventListener("input",g)}}o(y({},{[c]:e.value}),{ifMissing:!0});let u=()=>o(y({},{[c]:e.value}));e.addEventListener("change",u),e.addEventListener("input",u);let v=r(()=>e.value=a(c));return()=>{v(),e.removeEventListener("change",u),e.removeEventListener("input",u)}}o(y({},{[c]:e.getAttribute("value")}),{ifMissing:!0});let m=new MutationObserver(()=>{o(y({},{[c]:e.getAttribute("value")}))});m.observe(e,{attributeFilter:["value"]});let p=r(()=>e.setAttribute("value",a(c)));return()=>{p(),m.disconnect()}}};var Pt={type:"attribute",name:"class",valReq:"must",isExpr:!0,onLoad:({key:e,el:t,effect:n,mods:i,rx:r})=>{if(e===""){let l=new MutationObserver(()=>{l.disconnect();let m=r();for(let[p,u]of Object.entries(m)){let d=p.split(/\s+/);u?t.classList.add(...d):t.classList.remove(...d)}l.observe(t,{attributeFilter:["class"]})}),c=n(()=>{l.disconnect();let m=r();for(let[p,u]of Object.entries(m)){let d=p.split(/\s+/);u?t.classList.add(...d):t.classList.remove(...d)}l.observe(t,{attributeFilter:["class"]})});return()=>{l.disconnect(),c()}}let o=A(e);o=x(o,i);let s=new MutationObserver(()=>{s.disconnect(),r()?t.classList.add(o):t.classList.remove(o),s.observe(t,{attributeFilter:["class"]})}),a=n(()=>{s.disconnect(),r()?t.classList.add(o):t.classList.remove(o),s.observe(t,{attributeFilter:["class"]})});return()=>{s.disconnect(),a()}}};var D=`${w}-sse`,Se="started",Re="finished",It="error",Dt="retrying",Ht="retrying";function Te(e,t){document.addEventListener(D,n=>{if(n.detail.type===e){let{argsRaw:i}=n.detail;t(i)}})}var _t={type:"attribute",name:"indicator",keyReq:"exclusive",valReq:"exclusive",onLoad:({el:e,key:t,mods:n,mergePatch:i,value:r})=>{let o=t?x(t,n):r;o=L(o,e,n),i(y({},{[o]:!1}),{ifMissing:!0});let s=a=>{let{type:l,el:c}=a.detail;if(c===e)switch(l){case Se:i(y({},{[o]:!0}));break;case Re:i(y({},{[o]:!1}));break}};return document.addEventListener(D,s),()=>{i(y({},{[o]:!1})),document.removeEventListener(D,s)}}};var Vt={type:"attribute",name:"jsonSignals",keyReq:"denied",onLoad:({el:e,effect:t,value:n,filtered:i,mods:r})=>{let o=r.has("terse")?0:2,s={};n&&(s=ue(n));let a=()=>{l.disconnect(),e.textContent=JSON.stringify(i(s),null,o),l.observe(e,{childList:!0})},l=new MutationObserver(a),c=t(a);return()=>{l.disconnect(),c()}}};function H(e){if(!e||e.size<=0)return 0;for(let t of e){if(t.endsWith("ms"))return+t.replace("ms","");if(t.endsWith("s"))return+t.replace("s","")*1e3;try{return Number.parseFloat(t)}catch{}}return 0}function N(e,t,n=!1){return e?e.has(t.toLowerCase()):n}function De(e,t){return(...n)=>{setTimeout(()=>{e(...n)},t)}}function Tn(e,t,n=!1,i=!0){let r=0;return(...o)=>{r&&clearTimeout(r),n&&!r&&e(...o),r=setTimeout(()=>{i&&e(...o),r&&clearTimeout(r)},t)}}function An(e,t,n=!0,i=!1){let r=!1;return(...o)=>{r||(n&&e(...o),r=!0,setTimeout(()=>{r=!1,i&&e(...o)},t))}}function Ae(e,t){let n=t.get("delay");if(n){let o=H(n);e=De(e,o)}let i=t.get("debounce");if(i){let o=H(i),s=N(i,"leading",!1),a=!N(i,"notrail",!1);e=Tn(e,o,s,a)}let r=t.get("throttle");if(r){let o=H(r),s=!N(r,"noleading",!1),a=N(r,"trail",!1);e=An(e,o,s,a)}return e}var He=!!document.startViewTransition;function _(e,t){if(t.has("viewtransition")&&He){let n=e;e=(...i)=>document.startViewTransition(()=>n(...i))}return e}var Nt={type:"attribute",name:"on",keyReq:"must",valReq:"must",argNames:["evt"],onLoad:e=>{let{el:t,key:n,mods:i,rx:r}=e,o=t;i.has("window")&&(o=window);let s=c=>{if(c){if(i.has("prevent")&&c.preventDefault(),i.has("stop")&&c.stopPropagation(),!(c.isTrusted||c instanceof CustomEvent||i.has("trust")))return;e.evt=c}r(c)};s=Ae(s,i),s=_(s,i);let a={capture:i.has("capture"),passive:i.has("passive"),once:i.has("once")};if(i.has("outside")){o=document;let c=s;s=m=>{t.contains(m?.target)||c(m)}}let l=A(n);if(l=x(l,i),(l===D||l===de)&&(o=document),t instanceof HTMLFormElement&&l==="submit"){let c=s;s=m=>{m?.preventDefault(),c(m)}}return o.addEventListener(l,s,a),()=>{o.removeEventListener(l,s)}}};var _e=new WeakSet,jt={type:"attribute",name:"onIntersect",keyReq:"denied",onLoad:({el:e,mods:t,rx:n})=>{let i=()=>n();i=Ae(i,t),i=_(i,t);let r={threshold:0};t.has("full")?r.threshold=1:t.has("half")&&(r.threshold=.5);let o=new IntersectionObserver(s=>{for(let a of s)a.isIntersecting&&(i(),o&&_e.has(e)&&o.disconnect())},r);return o.observe(e),t.has("once")&&_e.add(e),()=>{t.has("once")||_e.delete(e),o&&(o.disconnect(),o=null)}}};var qt={type:"attribute",name:"onInterval",keyReq:"denied",valReq:"must",onLoad:({mods:e,rx:t})=>{let n=()=>t();n=_(n,e);let i=1e3,r=e.get("duration");r&&(i=H(r),N(r,"leading",!1)&&n());let o=setInterval(n,i);return()=>{clearInterval(o)}}};var Gt={type:"attribute",name:"onLoad",keyReq:"denied",valReq:"must",onLoad:({rx:e,mods:t,mergePatch:n})=>{let i=()=>{let s=e();return n({}),s};i=_(i,t);let r=0,o=t.get("delay");o&&(r=H(o)),i=De(i,r),i()}};var Wt={type:"attribute",name:"ref",keyReq:"exclusive",valReq:"exclusive",onLoad:({el:e,key:t,mods:n,value:i,mergePatch:r})=>{let o=t?x(t,n):i;o=L(o,e,n),r(y({},{[o]:e}))}};var Kt={type:"attribute",name:"scope",keyReq:"denied",onLoad:({el:e,value:t,mods:n,mergePatch:i})=>{let r=t||`_${crypto.randomUUID()}`;e.parentElement&&(r=L(r,e.parentElement,n));let o=r.split(".").reduceRight((s,a)=>({[a]:s}),{});return i(o),e.setAttribute("data-scope",r),e.removeAttribute("data-scope__scoped"),()=>{let a=r.split(".").reduceRight((l,c)=>({[c]:l}),null);i(a)}}};var Ut="none",Bt="display",Jt={type:"attribute",name:"show",keyReq:"denied",valReq:"must",isExpr:!0,onLoad:({el:e,effect:t,rx:n})=>{let i=()=>{r.disconnect(),n()?e.style.display===Ut&&e.style.removeProperty(Bt):e.style.setProperty(Bt,Ut),r.observe(e,{attributeFilter:["style"]})},r=new MutationObserver(i),o=t(i);return()=>{r.disconnect(),o()}}};var zt={type:"attribute",name:"text",keyReq:"denied",valReq:"must",isExpr:!0,onLoad:({el:e,effect:t,rx:n})=>{let i=()=>{r.disconnect(),e.textContent=`${n()}`,r.observe(e,{childList:!0})},r=new MutationObserver(i),o=t(i);return()=>{r.disconnect(),o()}}};var xn=e=>`${e}`.includes("text/event-stream"),V=(e,t,n)=>document.dispatchEvent(new CustomEvent(D,{detail:{type:e,el:t,argsRaw:n}}));function Ln(e,t){let n={Accept:"text/event-stream, text/html, application/json",[We]:!0};return e==="json"&&(n["Content-Type"]="application/json"),Object.assign({},n,t)}var Qt=async({el:e,evt:t,filtered:n,runtimeErr:i},r,o,{selector:s,headers:a,contentType:l="json",filterSignals:c={include:/.*/,exclude:/(^|\.)_/},openWhenHidden:m=!1,retryInterval:p=Ke,retryScaler:u=2,retryMaxWaitMs:d=3e4,retryMaxCount:v=10,abort:g}={})=>{let f=r.toLowerCase(),b=()=>{};try{if(!o?.length)throw i("SseNoUrlProvided",{action:f});let E=Ln(l,a),h=new URL(o,window.location.href),R=new URLSearchParams(h.search),S=null;if(l==="json"){let T=JSON.stringify(n(c));r==="GET"?R.set(w,T):S=T}else if(l==="form"){let T=s?document.querySelector(s):e.closest("form");if(!T)throw i(s?"FormNotFound":"ClosestFormNotFound",{method:r,selector:s});if(!T.checkValidity()){T.reportValidity();return}let J=new FormData(T),z=e;if(e===T&&t instanceof SubmitEvent)z=t.submitter;else{let F=Q=>Q.preventDefault();T.addEventListener("submit",F),b=()=>T.removeEventListener("submit",F)}if(z instanceof HTMLButtonElement){let F=z.getAttribute("name");F&&J.append(F,z.value)}let je=T.getAttribute("enctype")==="multipart/form-data",qe={};if(r==="GET"){let F=new URLSearchParams(J);for(let[Q,oe]of F)R.append(Q,oe)}else je?S=J:(qe["Content-Type"]="application/x-www-form-urlencoded",S=new URLSearchParams(J))}else throw i("SseInvalidContentType",{action:f,contentType:l});let se;V(Se,e,{}),h.search=R.toString();try{await Mn(h.toString(),e,{method:r,headers:E,body:S,signal:g,openWhenHidden:m,retryInterval:p,retryScaler:u,retryMaxWaitMs:d,retryMaxCount:v,duplex:se})}catch(T){if(!xn(T))throw i("SseFetchFailed",{method:r,url:o,error:T})}}finally{V(Re,e,{}),b()}};async function Mn(e,t,n){let{signal:i,openWhenHidden:r=!1,retryInterval:o=1e3,retryScaler:s=2,retryMaxWaitMs:a=3e4,retryMaxCount:l=10,...c}=n,m=0,p=o,u=new AbortController,d=()=>{document.hidden&&!r&&u.abort()};document.addEventListener("visibilitychange",d);let v=()=>{document.removeEventListener("visibilitychange",d),u.abort()};i?.addEventListener("abort",v);async function g(){u=new AbortController;try{let f=await fetch(e,{...c,signal:u.signal});f.status>=400&&V(It,t,{status:f.status.toString()}),m=0,p=o;let b=f.headers.get("Content-Type");if(b?.includes("text/html")){let h={elements:await f.text()};for(let R of["selector","mode","useViewTransition"]){let S=f.headers.get(`datastar-${A(R)}`);S&&(h[R]=S)}V(Z,t,h)}else if(b?.includes("application/json")){let h={signals:await f.text()};for(let R of["onlyIfMissing","mode","useViewTransition"]){let S=f.headers.get(`datastar-${A(R)}`);S&&(h[R]=S)}V(Y,t,h)}else if(b?.includes("text/javascript")){let E=document.createElement("script"),h=f.headers.get("datastar-script-attributes");if(h)for(let[R,S]of Object.entries(JSON.parse(h)))E.setAttribute(R,S);E.textContent=await f.text(),document.head.appendChild(E)}else await wn(f,t,E=>{p=E});v()}catch(f){if(!u.signal.aborted){if(++m>=l)throw V(Ht,t,{}),v(),new Error("Max retries reached");return V(Dt,t,{message:`${f}`}),p=Math.min(p*s,a),await new Promise(b=>setTimeout(b,p)),g()}}}return g()}async function wn(e,t,n){let i=e.body.getReader(),r=new TextDecoder,o="";for(;;){let{done:s,value:a}=await i.read();if(s)break;o+=r.decode(a,{stream:!0});let l=o.split(`
`);o=l.pop()||"";let c=0;for(;c<l.length;){let m="",p=[],u;for(;c<l.length&&l[c].length>0;){let d=l[c];if(d.startsWith("event:"))m=d.slice(6).trimStart();else if(d.startsWith("data:"))p.push(d.slice(5).trimStart());else if(d.startsWith("retry:")){let v=Number.parseInt(d.slice(6).trimStart());Number.isNaN(v)||(u=v)}c++}if(m.includes(w)&&p.length>0){let d={};for(let g of p){let f=g.indexOf(" ");if(f>0){let b=g.slice(0,f),E=g.slice(f+1);d[b]||(d[b]=[]),d[b].push(E)}}let v={};for(let[g,f]of Object.entries(d))v[g]=f.join(`
`);V(m,t,v)}u!==void 0&&n(u),c++}}}var C=(e,t)=>({type:"action",name:e,fn:(n,i,r)=>Qt(n,t,i,r)});var Zt=C("delete","DELETE");var Yt=C("get","GET");var Xt=C("patch","PATCH");var en=C("post","POST");var tn=C("put","PUT");var on={type:"watcher",name:Z,async onGlobalInit(e){Te(Z,t=>On(e,t))}};function On(e,{elements:t,selector:n,mode:i=et,useViewTransition:r}){let o=document.createElement("template");o.innerHTML=t;for(let s of[...o.content.childNodes]){let a=s.nodeType;if(a!==1){if(a===3&&!s.nodeValue.trim())continue;throw G("NoElementsFound",e)}let l=n||`#${s.id}`,c=document.querySelectorAll(l);if(!c.length)throw G("NoTargetsFound",e,{selectorOrId:l});r&&He?document.startViewTransition(()=>nn(e,i,s,c)):nn(e,i,s,c)}}function nn(e,t,n,i){for(let r of i){if(t===Je)r.remove();else if(t===Le||t===Be)Cn(r,n,t);else{let s=n.cloneNode(!0);if(t===ze)r.replaceWith(s);else if(t===Qe)r.prepend(s);else if(t===Ze)r.append(s);else if(t===Ye)r.before(s);else if(t===Xe)r.after(s);else throw G("InvalidPatchMode",e,{mode:t})}let o=r instanceof HTMLScriptElement?[r]:r.querySelectorAll("script");for(let s of o){let a=document.createElement("script");for(let{name:l,value:c}of s.attributes)a.setAttribute(l,c);a.text=s.text,s.replaceWith(a)}}}var K=new Map,M=new Map,U=new Set,re=new Set,B=document.createElement("div");B.hidden=!0;function Cn(e,t,n){let i=O("ignore-morph");if(e.hasAttribute(i)&&t.hasAttribute(i)||e.parentElement?.closest(`[${i}]`))return;let r=document.createElement("div");r.append(t),document.body.insertAdjacentElement("afterend",B);let o=e.querySelectorAll("[id]");for(let{id:a,tagName:l}of o)K.has(a)?re.add(a):K.set(a,l);e.id&&(K.has(e.id)?re.add(e.id):K.set(e.id,e.tagName)),U.clear();let s=r.querySelectorAll("[id]");for(let{id:a,tagName:l}of s)U.has(a)?re.add(a):K.get(a)===l&&U.add(a);K.clear();for(let a of re)U.delete(a);re.clear(),M.clear(),sn(n==="outer"?e.parentElement:e,o),sn(r,s),an(n==="outer"?e.parentElement:e,r,n==="outer"?e:null,e.nextSibling),B.remove()}function an(e,t,n=null,i=null){e instanceof HTMLTemplateElement&&t instanceof HTMLTemplateElement&&(e=e.content,t=t.content),n??=e.firstChild;for(let r of t.childNodes){if(n&&n!==i){let s=Fn(r,n,i);if(s){if(s!==n){let a=n;for(;a&&a!==s;){let l=a;a=a.nextSibling,Ne(l)}}Ve(s,r),n=s.nextSibling;continue}}let o=r.id;if(r instanceof Element&&U.has(o)){let s=window[o],a=s;for(;a=a.parentNode;){let l=M.get(a);l&&(l.delete(o),l.size||M.delete(a))}cn(e,s,n),Ve(s,r),n=s.nextSibling;continue}if(M.has(r)){let s=document.createElement(r.tagName);e.insertBefore(s,n),Ve(s,r),n=s.nextSibling}else{let s=document.importNode(r,!0);e.insertBefore(s,n),n=s.nextSibling}}for(;n&&n!==i;){let r=n;n=n.nextSibling,Ne(r)}}function Fn(e,t,n){let i=null,r=e.nextSibling,o=0,s=0,a=M.get(e)?.size||0,l=t;for(;l&&l!==n;){if(rn(l,e)){let c=!1,m=M.get(l),p=M.get(e);if(p&&m){for(let u of m)if(p.has(u)){c=!0;break}}if(c)return l;if(!i&&!M.has(l)){if(!a)return l;i=l}}if(s+=M.get(l)?.size||0,s>a||(i===null&&r&&rn(l,r)&&(o++,r=r.nextSibling,o>=2&&(i=void 0)),l.contains(document.activeElement)))break;l=l.nextSibling}return i||null}function rn(e,t){let n=e.id;return e.nodeType===t.nodeType&&e.tagName===t.tagName&&(!n||n===t.id)}function Ne(e){M.has(e)?cn(B,e,null):e.parentNode?.removeChild(e)}var cn=Ne.call.bind(B.moveBefore??B.insertBefore);function Ve(e,t){let n=t.nodeType;if(n===1){let i=O("ignore-morph");if(e.hasAttribute(i)&&t.hasAttribute(i))return e;let r=t.getAttribute(O("preserve-attr"))?.split(" ");for(let{name:s,value:a}of t.attributes)e.getAttribute(s)!==a&&!r?.includes(A(s))&&e.setAttribute(s,a);let o=e.attributes;for(let s=o.length-1;s>=0;s--){let{name:a}=o[s];!t.hasAttribute(a)&&!r?.includes(A(a))&&e.removeAttribute(a)}if(e instanceof HTMLInputElement&&t instanceof HTMLInputElement&&t.type!=="file"){let s=O("bind").slice(5),a=!0;for(let l in t.dataset)if(l.startsWith(s)){a=!1;break}if(a){let l=t.value;t.hasAttribute("value")?e.value!==l&&(e.setAttribute("value",l),e.value=l):(e.value="",e.removeAttribute("value"))}}else if(e instanceof HTMLTextAreaElement&&t instanceof HTMLTextAreaElement){let s=t.value;s!==e.value&&(e.value=s),e.firstChild&&e.firstChild.nodeValue!==s&&(e.firstChild.nodeValue=s)}}return(n===8||n===3)&&e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue),e.isEqualNode(t)||an(e,t),e}function sn(e,t){for(let n of t)if(U.has(n.id)){let i=n;for(;i&&i!==e;){let r=M.get(i);r||(r=new Set,M.set(i,r)),r.add(n.id),i=i.parentElement}}}var ln={type:"watcher",name:Y,onGlobalInit:e=>Te(Y,({signals:t="{}",onlyIfMissing:n=`${Ue}`})=>e.mergePatch(ue(t),{ifMissing:nt(n)}))};Pe("star");Ee(Yt,en,tn,Xt,Zt,on,ln,$t,kt,Pt,_t,Vt,Nt,jt,qt,Gt,Wt,Kt,Jt,zt,Ot,Ct,Ft);Ie();export{Ie as apply,Ee as load,Pe as setAlias};
//# sourceMappingURL=datastar-aliased.js.map
